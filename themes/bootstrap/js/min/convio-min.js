!function($){luminateExtend({apiKey:"sosapikey",path:{nonsecure:"http://secure.nokidhungry.org/site/site/",secure:"https://secure.nokidhungry.org/site/"}}),$(function(){window.getUser=function(){var e=function(e){e.getConsResponse&&e.getConsResponse.name&&$("#login-form").replaceWith('<p class="navbar-text pull-right" id="welcome-back">Welcome back'+(e.getConsResponse.name.first?", "+e.getConsResponse.name.first:"")+'! <a href="'+luminateExtend.global.path.nonsecure+"UserLogin?logout=&NEXTURL="+encodeURIComponent(window.location.href)+'">Logout</a></p>')};luminateExtend.api({api:"cons",callback:e,data:"method=getUser",requestType:"POST",requiresAuth:!0})};var e={success:function(){getUser()},error:function(){$("#login-form").removeClass("hide")}};luminateExtend.api({api:"cons",callback:e,data:"method=loginTest"}),window.loginCallback={error:function(e){0==$("#login-error-modal").length?$("body").append('<div class="modal fade" id="login-error-modal"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">Error</h4></div><div class="modal-body"><p>'+e.errorResponse.message+'</p></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div></div></div></div>'):$("#login-error-modal .modal-body p").html(e.errorResponse.message),$("#login-error-modal").modal("show")},success:function(e){getUser()}},$(".donation-form").length>0&&($('input[name="level_id"]').click(function(){$(this).is("#level-other")?($("#other-amount").removeAttr("disabled"),$("#other-amount").attr("name","other_amount"),$("#other-amount").focus()):($("#other-amount").attr("disabled","disabled"),$("#other-amount").removeAttr("name"))}),$(".donation-form").submit(function(){window.scrollTo(0,0),$(this).hide(),$(this).before('<div class="well donation-loading">Loading ...</div>')})),window.donateCallback={error:function(e){console.log("error"),console.log(e),$("#donation-errors").remove(),$(".donation-form").prepend('<div id="donation-errors"><div class="alert alert-danger">'+e.errorResponse.message+"</div></div>"),$(".donation-loading").remove(),$(".donation-form").show()},success:function(e){if($("#donation-errors").remove(),console.log("success"),console.log(e),e.donationResponse.errors){if($(".donation-form").prepend('<div id="donation-errors">'+(e.donationResponse.errors.message?'<div class="alert alert-danger">'+e.donationResponse.errors.message+"</div>":"")+"</div>"),e.donationResponse.errors.fieldError){var r=luminateExtend.utils.ensureArray(e.donationResponse.errors.fieldError);$.each(r,function(){$("#donation-errors").append('<div class="alert alert-danger">'+this+"</div>")})}$(".donation-loading").remove(),$(".donation-form").show()}else thankContainer.classList.remove("hidden"),donateOverlay.classList.add("hidden"),$(".donation-loading").remove(),$(".donation-form").before('<div class="alert alert-success">Your donation has been processed!</div><div class="well"><p>Thank you for your donation of $'+e.donationResponse.donation.amount.decimal+".</p><p>Your confirmation code is "+e.donationResponse.donation.confirmation_code+".</p></div>")}},$(".survey-form").length>0&&$(".survey-form").submit(function(){window.scrollTo(0,0),$(this).hide(),$(this).before('<div class="well survey-loading">Loading ...</div>')}),window.submitSurveyCallback={error:function(e){$("#survey-errors").remove(),$(".survey-form .form-group .alert").remove(),$(".survey-form").prepend('<div id="survey-errors"><div class="alert alert-danger">'+e.errorResponse.message+"</div></div>"),$(".survey-loading").remove(),$(".survey-form").show()},success:function(e){if($("#survey-errors").remove(),$(".survey-form .form-group .survey-alert-wrap").remove(),"false"==e.submitSurveyResponse.success){$(".survey-form").prepend('<div id="survey-errors"><div class="alert alert-danger">There was an error with your submission. Please try again.</div></div>');var r=luminateExtend.utils.ensureArray(e.submitSurveyResponse.errors);$.each(r,function(){this.errorField&&$('input[name="'+this.errorField+'"]').closest(".form-group").prepend('<div class="col-sm-12 survey-alert-wrap"><div class="alert alert-danger">'+this.errorMessage+"</div></div>")}),$(".survey-loading").remove(),$(".survey-form").show()}else $(".survey-loading").remove(),$(".survey-form").before('<div class="alert alert-success">You\'ve been signed up!</div><div class="well"><p>Thanks for joining. You should receive your first issue of the e-newsletter shortly.</p></div>')}},window.getAdvocacyAlerts=function(e){var r=function(r){$(e).html("");var o=luminateExtend.utils.ensureArray(r.getAdvocacyAlertsResponse.alert);$.each(o,function(){$(e).append('<div class="action-alert-row"><p><a href="'+this.url+'"><strong>'+this.title+"</strong></a><br>"+this.description+"<br>"+("0"==this.interactionCount?"No actions taken so far. Be the first to respond!":"<strong>"+this.interactionCount+"</strong> actions taken so far.")+'</p><p><a class="btn btn-primary" href="'+this.url+'">Take Action</a></p></div>')})};luminateExtend.api({api:"advocacy",callback:r,data:"method=getAdvocacyAlerts&alert_status=active&alert_type=action"})},window.getTeamraisersByDistanceCallback={error:function(e){$("#teamraiser-event-search-errors").remove(),$("#teamraiser-event-search-results").html(""),$(".teamraiser-event-search-form").prepend('<div id="teamraiser-event-search-errors"><div class="alert alert-danger">'+e.errorResponse.message+"</div></div>")},success:function(e){if($("#teamraiser-event-search-errors").remove(),$("#teamraiser-event-search-results").html(""),0==e.getTeamraisersResponse.totalNumberResults)$(".teamraiser-event-search-form").prepend('<div id="teamraiser-event-search-errors"><div class="alert alert-danger">No events found. Please try another search.</div></div>');else{$("#teamraiser-event-search-results").html('<div class="well"></div>');var r=luminateExtend.utils.ensureArray(e.getTeamraisersResponse.teamraiser);$.each(r,function(){$("#teamraiser-event-search-results .well").append('<div class="teamraiser-event-search-row"><p><a href="'+this.greeting_url+'"><strong>'+this.name+"</strong></a><br>"+luminateExtend.utils.simpleDateFormat(this.event_date,"MMMM d, yyyy")+'</p><p><a class="btn btn-primary" href="'+this.reg_new_team_url+'">Form a Team</a> <a class="btn btn-primary" href="'+this.reg_join_team_url+'">Join a Team</a> </div>')})}}},luminateExtend.api.bind()})}(jQuery);